import{k as F,r as n,l as E,o as L,u as P,m as U,c as d,a as w,b as t,i as z,e as A,t as r,j as W,n as H,h as S,v as N,p as k,w as O,d as Y,f as Z,g as m}from"./index-DvRa-Evj.js";import{b as q}from"./bannerComponent-D4Az8HOE.js";import{a as J}from"./accountInput-CK1ZVtm5.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as X}from"./help-CmPQ-lNE.js";import{c as j}from"./validate-2aEoLZUc.js";const ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAKBJREFUWAntk9ENgzAMBRnhMkE7QkdhBDZlBEZgBEZoBQip/ansRAI+LpKVH1vvfFG6zqMBDWhAAxrQgAY0oIGkAfbTA0Ow+mREWzuUCco7WWNbanAaeCbBvhbhEYypb9tftywVkPM6W5+cmARekIJc1plERHtrAvJ8uGO9AOR1cAHI6+H+QN4H7heSEbY690McEN4a0IAGNKABDWjgdgY+LJhufuGbVsgAAAAASUVORK5CYII=",oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAALNJREFUWAntk8EJwzAMRTNCNmhHyCgZoZt6hI7QEQTul5WbQg6B9lBixdD48A3CF4n/9LCHgYcGaIAGaIAGaIAGaIAGggZEfMxZ55zxqCudgxFt7arLE2oeqmKpLbVyWszuIbCPRdz9Vhlzvk1ERmiRMGSx1/Y0zicHJgFMEci3FhFgCkS0t9ZCXgK3r3cEeSncEWQXcL8gu4L7goQlwNLfP8QOwZsGaIAGaIAGaIAGujOwAhE0nTL5TAEaAAAAAElFTkSuQmCC",te={style:{"margin-top":"22px"}},ae={key:0,class:"arrowDown",src:ee,alt:""},ne={key:1,class:"arrowDown",src:oe,alt:""},le={class:"accountPanel"},se=["placeholder"],re={href:"https://www.ceexglobal.com/doc/service_cn.html"},ce={href:"https://www.ceexglobal.com/doc/secret_cn.html"},ue={class:"toRegist"},ie={__name:"regist",setup(ve){const R=F(),B=Z(),I=P(),a=n(""),h=n(!1),c=n("");n(["@gmail.com","@qq.com","@hotmail.com","@outlook.com","@icloud.com"]);const f=n(null),v=n(!0),u=n(!1),C=n(!1),l=n(""),i=n(""),g=n(!1),b=n("");let p=null;const T=async()=>{if(!navigator.clipboard)return console.warn("剪贴板API不可用"),"";try{const e=await navigator.clipboard.readText();return i.value=e,e}catch(e){return e.name==="NotAllowedError"?console.warn("剪贴板访问被拒绝，用户可能需要授予权限"):e.name==="SecurityError"?console.warn("由于安全策略限制，无法访问剪贴板"):console.error("读取剪贴板失败:",e),i.value="",""}},V=async()=>{try{await T()}catch(e){console.warn("检查剪贴板内容失败:",e),i.value=""}};E(()=>localStorage.getItem("nationalCode"),()=>{a.value==="phone"&&l.value&&console.log("国家代码变更")},{immediate:!0});const G=()=>{c.value=""},x=async()=>{const e=await T();c.value=e},M=()=>{c.value=i.value},_=()=>{a.value=="email"&&(a.value="")},$=()=>{const e=n("");if(console.log("isAccountValid",v.value),console.log("account",l.value),l.value.length<3){u.value=!0;return}if(!v.value){u.value=!0,console.log("账号格式验证失败");return}if(!j(l.value).isValid){u.value=!0,b.value="账号不能包含空格或中文字符";return}if(a.value=X(l.value),console.log("accountType.value",a.value),a.value=="phone")e.value="/registCheck/phone";else if(a.value=="email")e.value="/registCheck/email";else{console.log("请输入正确的账号格式");return}if(!g.value){console.log("请同意用户协议"),f.value.style.opacity=1;return}console.log("routerPath",e.value),B.push({path:e.value,query:{account:l.value,accountType:a.value,invitationCode:c.value,nationalCode:a.value==="phone"?localStorage.getItem("nationalCode")||"86":""}})};E(l,()=>{l.value.length==0&&(a.value="",v.value=!0,u.value=!1)}),L(()=>{try{V(),p=setInterval(()=>{V()},1e3)}catch(e){console.error("剪贴板检查初始化失败:",e)}if(console.log("accountType:",a.value),I.path==="/regist"&&I.query.from==="selectCountry"){a.value="phone";const e=sessionStorage.getItem("tempLoginData");if(console.log("savedData",e),e)try{const{account:o,type:y}=JSON.parse(e);a.value=y,l.value=o,sessionStorage.removeItem("tempLoginData"),setTimeout(()=>{const s=document.querySelector(".accountPanel input");s&&s.focus()},300)}catch(o){console.error("解析保存的账号数据失败:",o)}}}),U(()=>{try{p&&(clearInterval(p),p=null)}catch(e){console.error("清除剪贴板检查定时器失败:",e)}});const Q=e=>{a.value=e,console.log("账号类型变更为:",e)},D=e=>{v.value=e,u.value=!1,console.log("isAccountValid",v.value,"accountError",u.value)};return E(g,e=>{e&&(f.value.style.opacity=0)}),(e,o)=>{const y=Y("router-link");return m(),d("div",{class:"root",onClick:_},[w(q,{content:e.$t("注册您的CEEX专属账号")},null,8,["content"]),t("main",null,[w(J,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=s=>l.value=s),onTypeChange:Q,onValidChange:D,from:"/regist",accountError:u.value,accountErrorMessage:b.value},null,8,["modelValue","accountError","accountErrorMessage"]),t("section",te,[t("div",{onClick:o[1]||(o[1]=s=>h.value=!h.value),class:"invitationCodeTitle"},[A(r(e.$t("邀请码(选填)"))+" ",1),W(R).theme==="light"?(m(),d("img",ae)):(m(),d("img",ne))]),h.value?(m(),d("section",{key:0,class:H(["inputPanel",{borderNone:!C.value}])},[t("div",le,[S(t("input",{type:"text",placeholder:e.$t("请输入邀请码(选填)"),onPaste:x,"onUpdate:modelValue":o[2]||(o[2]=s=>c.value=s),onFocus:o[3]||(o[3]=s=>C.value=!0),onBlur:o[4]||(o[4]=s=>C.value=!1)},null,40,se),[[N,c.value]]),t("div",{class:"clearPanel",style:k({justifyContent:i.value.length==0?"flex-end":"space-between"})},[t("span",{class:"clear",style:k({width:c.value.length==0?"0px":"18px"}),onClick:G},null,4),t("span",{class:"paste",style:k({width:i.value.length==0?"0px":"40px"}),onClick:M},r(e.$t("粘贴")),5)],4)])],2)):z("",!0)]),t("footer",null,[S(t("input",{type:"checkBox",name:"",id:"","onUpdate:modelValue":o[5]||(o[5]=s=>g.value=s)},null,512),[[N,g.value]]),t("span",null,[A(r(e.$t("我已阅读并同意"))+" CEEX ",1),t("a",re,r(e.$t("用户协议")),1),A(" "+r(e.$t("与"))+" ",1),t("a",ce,r(e.$t("个人隐私政策")),1)])]),t("div",{ref_key:"agreement",ref:f,class:"agreement"},r(e.$t("请同意用户协议")),513),t("button",{class:"nextStep",onClick:$},r(e.$t("下一步")),1),t("div",ue,[A(r(e.$t("已经拥有账户"))+"？ ",1),w(y,{to:"/login"},{default:O(()=>[A(r(e.$t("去登录")),1)]),_:1})])])])}}},fe=K(ie,[["__scopeId","data-v-04e9ead0"]]);export{fe as default};
