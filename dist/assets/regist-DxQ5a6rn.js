import{k as L,r as a,l as E,o as P,u as U,m as z,c as A,a as w,b as t,i as V,e as g,t as s,j as F,n as W,h as T,v as N,p as k,w as H,d as O,f as Y,g as d}from"./index-BDoxEieh.js";import{b as Z}from"./bannerComponent-BTsLBmZ_.js";import{a as q}from"./accountInput-DqXUacMV.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./help-CmPQ-lNE.js";const K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAKBJREFUWAntk9ENgzAMBRnhMkE7QkdhBDZlBEZgBEZoBQip/ansRAI+LpKVH1vvfFG6zqMBDWhAAxrQgAY0oIGkAfbTA0Ow+mREWzuUCco7WWNbanAaeCbBvhbhEYypb9tftywVkPM6W5+cmARekIJc1plERHtrAvJ8uGO9AOR1cAHI6+H+QN4H7heSEbY690McEN4a0IAGNKABDWjgdgY+LJhufuGbVsgAAAAASUVORK5CYII=",X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAALNJREFUWAntk8EJwzAMRTNCNmhHyCgZoZt6hI7QEQTul5WbQg6B9lBixdD48A3CF4n/9LCHgYcGaIAGaIAGaIAGaIAGggZEfMxZ55zxqCudgxFt7arLE2oeqmKpLbVyWszuIbCPRdz9Vhlzvk1ERmiRMGSx1/Y0zicHJgFMEci3FhFgCkS0t9ZCXgK3r3cEeSncEWQXcL8gu4L7goQlwNLfP8QOwZsGaIAGaIAGaIAGujOwAhE0nTL5TAEaAAAAAElFTkSuQmCC",j={style:{"margin-top":"22px"}},ee={key:0,class:"arrowDown",src:K,alt:""},oe={key:1,class:"arrowDown",src:X,alt:""},te={class:"accountPanel"},ae=["placeholder"],ne={href:"https://www.ceexglobal.com/doc/service_cn.html"},le={href:"https://www.ceexglobal.com/doc/secret_cn.html"},se={class:"toRegist"},re={__name:"regist",setup(ce){const R=L(),B=Y(),I=U(),n=a(""),h=a(!1),c=a("");a(["@gmail.com","@qq.com","@hotmail.com","@outlook.com","@icloud.com"]);const f=a(null),v=a(!0),i=a(!1),C=a(!1),r=a(""),u=a(""),p=a(!1);a("");let m=null;const b=async()=>{if(!navigator.clipboard)return console.warn("剪贴板API不可用"),"";try{const e=await navigator.clipboard.readText();return u.value=e,e}catch(e){return e.name==="NotAllowedError"?console.warn("剪贴板访问被拒绝，用户可能需要授予权限"):e.name==="SecurityError"?console.warn("由于安全策略限制，无法访问剪贴板"):console.error("读取剪贴板失败:",e),u.value="",""}},S=async()=>{try{await b()}catch(e){console.warn("检查剪贴板内容失败:",e),u.value=""}};E(()=>localStorage.getItem("nationalCode"),()=>{n.value==="phone"&&r.value&&console.log("国家代码变更")},{immediate:!0});const G=()=>{c.value=""},x=async()=>{const e=await b();c.value=e},_=()=>{c.value=u.value},$=()=>{n.value=="email"&&(n.value="")},M=()=>{const e=a("");if(console.log("isAccountValid",v.value),console.log("account",r.value),r.value.length<3){i.value=!0;return}if(!v.value){i.value=!0,console.log("账号格式验证失败");return}if(n.value=="phone")e.value="/registCheck/phone";else if(n.value=="email")e.value="/registCheck/email";else{console.log("请输入正确的账号格式");return}if(!p.value){console.log("请同意用户协议"),f.value.style.opacity=1;return}console.log("routerPath",e.value),B.push({path:e.value,query:{account:r.value,accountType:n.value,invitationCode:c.value,nationalCode:n.value==="phone"?localStorage.getItem("nationalCode")||"86":""}})};E(r,()=>{r.value.length==0&&(n.value="",v.value=!0,i.value=!1)}),P(()=>{try{S(),m=setInterval(()=>{S()},1e3)}catch(e){console.error("剪贴板检查初始化失败:",e)}if(console.log("accountType:",n.value),I.path==="/regist"&&I.query.from==="selectCountry"){n.value="phone";const e=sessionStorage.getItem("tempLoginData");if(console.log("savedData",e),e)try{const{account:o,type:y}=JSON.parse(e);n.value=y,r.value=o,sessionStorage.removeItem("tempLoginData"),setTimeout(()=>{const l=document.querySelector(".accountPanel input");l&&l.focus()},300)}catch(o){console.error("解析保存的账号数据失败:",o)}}}),z(()=>{try{m&&(clearInterval(m),m=null)}catch(e){console.error("清除剪贴板检查定时器失败:",e)}});const Q=e=>{n.value=e,console.log("账号类型变更为:",e)},D=e=>{v.value=e,i.value=!1,console.log("isAccountValid",v.value,"accountError",i.value)};return E(p,e=>{e&&(f.value.style.opacity=0)}),(e,o)=>{const y=O("router-link");return d(),A("div",{class:"root",onClick:$},[w(Z,{content:e.$t("注册您的CEEX专属账号")},null,8,["content"]),t("main",null,[w(q,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=l=>r.value=l),onTypeChange:Q,onValidChange:D,from:"/regist",accountError:i.value},null,8,["modelValue","accountError"]),t("section",j,[t("div",{onClick:o[1]||(o[1]=l=>h.value=!h.value),class:"invitationCodeTitle"},[g(s(e.$t("邀请码(选填)"))+" ",1),F(R).theme==="light"?(d(),A("img",ee)):(d(),A("img",oe))]),h.value?(d(),A("section",{key:0,class:W(["inputPanel",{borderNone:!C.value}])},[t("div",te,[T(t("input",{type:"text",placeholder:e.$t("请输入邀请码(选填)"),onPaste:x,"onUpdate:modelValue":o[2]||(o[2]=l=>c.value=l),onFocus:o[3]||(o[3]=l=>C.value=!0),onBlur:o[4]||(o[4]=l=>C.value=!1)},null,40,ae),[[N,c.value]]),t("div",{class:"clearPanel",style:k({justifyContent:u.value.length==0?"flex-end":"space-between"})},[t("span",{class:"clear",style:k({width:c.value.length==0?"0px":"18px"}),onClick:G},null,4),u.value.length>0?(d(),A("span",{key:0,class:"paste",style:k({width:u.value.length==0?"0px":"40px"}),onClick:_},s(e.$t("粘贴")),5)):V("",!0)],4)])],2)):V("",!0)]),t("footer",null,[T(t("input",{type:"checkBox",name:"",id:"","onUpdate:modelValue":o[5]||(o[5]=l=>p.value=l)},null,512),[[N,p.value]]),t("span",null,[g(s(e.$t("我已阅读并同意"))+" CEEX ",1),t("a",ne,s(e.$t("用户协议")),1),g(" "+s(e.$t("与"))+" ",1),t("a",le,s(e.$t("个人隐私协议")),1)])]),t("div",{ref_key:"agreement",ref:f,class:"agreement"},s(e.$t("请同意用户协议")),513),t("button",{class:"nextStep",onClick:M},s(e.$t("下一步")),1),t("div",se,[g(s(e.$t("已经拥有账户"))+"？ ",1),w(y,{to:"/login"},{default:H(()=>[g(s(e.$t("去登录")),1)]),_:1})])])])}}},de=J(re,[["__scopeId","data-v-ae7fe3fd"]]);export{de as default};
