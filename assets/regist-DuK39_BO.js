import{l as Q,r as n,m as E,o as D,u as L,p as P,c as p,a as w,b as t,j as U,e as v,t as r,k as z,n as F,i as T,v as S,q as W,w as q,d as H,f as O,h as m}from"./index-CSxe3lll.js";import{b as Y}from"./bannerComponent-uB4I_XHw.js";import{a as Z}from"./accountInput-12gtF_HF.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as K}from"./help-CmPQ-lNE.js";const X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAKBJREFUWAntk9ENgzAMBRnhMkE7QkdhBDZlBEZgBEZoBQip/ansRAI+LpKVH1vvfFG6zqMBDWhAAxrQgAY0oIGkAfbTA0Ow+mREWzuUCco7WWNbanAaeCbBvhbhEYypb9tftywVkPM6W5+cmARekIJc1plERHtrAvJ8uGO9AOR1cAHI6+H+QN4H7heSEbY690McEN4a0IAGNKABDWjgdgY+LJhufuGbVsgAAAAASUVORK5CYII=",j="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAALNJREFUWAntk8EJwzAMRTNCNmhHyCgZoZt6hI7QEQTul5WbQg6B9lBixdD48A3CF4n/9LCHgYcGaIAGaIAGaIAGaIAGggZEfMxZ55zxqCudgxFt7arLE2oeqmKpLbVyWszuIbCPRdz9Vhlzvk1ERmiRMGSx1/Y0zicHJgFMEci3FhFgCkS0t9ZCXgK3r3cEeSncEWQXcL8gu4L7goQlwNLfP8QOwZsGaIAGaIAGaIAGujOwAhE0nTL5TAEaAAAAAElFTkSuQmCC",ee={style:{"margin-top":"22px"}},oe={key:0,class:"arrowDown",src:X,alt:""},te={key:1,class:"arrowDown",src:j,alt:""},ae={class:"accountPanel"},ne=["placeholder"],le={class:"clearPanel"},se={href:"https://www.ceexglobal.com/doc/service_cn.html"},re={href:"https://www.ceexglobal.com/doc/secret_cn.html"},ce={class:"toRegist"},ue={__name:"regist",setup(ie){const V=Q(),N=O(),k=L(),a=n(""),h=n(!1),c=n("");n(["@gmail.com","@qq.com","@hotmail.com","@outlook.com","@icloud.com"]);const C=n(null),i=n(!0),u=n(!1),f=n(!1),s=n(""),A=n(""),g=n(!1);n("");let d=null;const I=async()=>{if(!navigator.clipboard)return console.warn("剪贴板API不可用"),"";try{const e=await navigator.clipboard.readText();return A.value=e,e}catch(e){return e.name==="NotAllowedError"?console.warn("剪贴板访问被拒绝，用户可能需要授予权限"):e.name==="SecurityError"?console.warn("由于安全策略限制，无法访问剪贴板"):console.error("读取剪贴板失败:",e),A.value="",""}},b=async()=>{try{await I()}catch(e){console.warn("检查剪贴板内容失败:",e),A.value=""}};E(()=>localStorage.getItem("nationalCode"),()=>{a.value==="phone"&&s.value&&console.log("国家代码变更")},{immediate:!0});const R=()=>{c.value=""},B=async()=>{const e=await I();c.value=e},_=()=>{c.value=A.value},G=()=>{a.value=="email"&&(a.value="")},$=()=>{const e=n("");if(console.log("isAccountValid",i.value),console.log("account",s.value),s.value.length<3){u.value=!0;return}if(!i.value){u.value=!0,console.log("账号格式验证失败");return}if(a.value=K(s.value),console.log("accountType.value",a.value),a.value=="phone")e.value="/registCheck/phone";else if(a.value=="email")e.value="/registCheck/email";else{console.log("请输入正确的账号格式");return}if(!g.value){console.log("请同意用户协议"),C.value.style.opacity=1;return}console.log("routerPath",e.value),N.push({path:e.value,query:{account:s.value,accountType:a.value,invitationCode:c.value,nationalCode:a.value==="phone"?localStorage.getItem("nationalCode")||"86":""}})};E(s,()=>{s.value.length==0&&(a.value="",i.value=!0,u.value=!1)}),D(()=>{try{b(),d=setInterval(()=>{b()},1e3)}catch(e){console.error("剪贴板检查初始化失败:",e)}if(console.log("accountType:",a.value),k.path==="/regist"&&k.query.from==="selectCountry"){a.value="phone";const e=sessionStorage.getItem("tempLoginData");if(console.log("savedData",e),e)try{const{account:o,type:y}=JSON.parse(e);a.value=y,s.value=o,sessionStorage.removeItem("tempLoginData"),setTimeout(()=>{const l=document.querySelector(".accountPanel input");l&&l.focus()},300)}catch(o){console.error("解析保存的账号数据失败:",o)}}}),P(()=>{try{d&&(clearInterval(d),d=null)}catch(e){console.error("清除剪贴板检查定时器失败:",e)}});const x=e=>{a.value=e,console.log("账号类型变更为:",e)},M=e=>{i.value=e,u.value=!1,console.log("isAccountValid",i.value,"accountError",u.value)};return E(g,e=>{e&&(C.value.style.opacity=0)}),(e,o)=>{const y=H("router-link");return m(),p("div",{class:"root",onClick:G},[w(Y,{content:e.$t("注册您的CEEX专属账号")},null,8,["content"]),t("main",null,[w(Z,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=l=>s.value=l),onTypeChange:x,onValidChange:M,from:"/regist",accountError:u.value},null,8,["modelValue","accountError"]),t("section",ee,[t("div",{onClick:o[1]||(o[1]=l=>h.value=!h.value),class:"invitationCodeTitle"},[v(r(e.$t("邀请码(选填)"))+" ",1),z(V).theme==="light"?(m(),p("img",oe)):(m(),p("img",te))]),h.value?(m(),p("section",{key:0,class:F(["inputPanel",{borderNone:!f.value}])},[t("div",ae,[T(t("input",{type:"text",placeholder:e.$t("请输入邀请码(选填)"),onPaste:B,"onUpdate:modelValue":o[2]||(o[2]=l=>c.value=l),onFocus:o[3]||(o[3]=l=>f.value=!0),onBlur:o[4]||(o[4]=l=>f.value=!1)},null,40,ne),[[S,c.value]]),t("div",le,[t("span",{class:"clear",style:W({width:c.value.length==0?"0px":"18px"}),onClick:R},null,4),t("span",{class:"paste",onClick:_},r(e.$t("粘贴")),1)])])],2)):U("",!0)]),t("footer",null,[T(t("input",{type:"checkBox",name:"",id:"","onUpdate:modelValue":o[5]||(o[5]=l=>g.value=l)},null,512),[[S,g.value]]),t("span",null,[v(r(e.$t("我已阅读并同意"))+" CEEX ",1),t("a",se,r(e.$t("用户协议")),1),v(" "+r(e.$t("与"))+" ",1),t("a",re,r(e.$t("个人隐私政策")),1)])]),t("div",{ref_key:"agreement",ref:C,class:"agreement"},r(e.$t("请同意用户协议")),513),t("button",{class:"nextStep",onClick:$},r(e.$t("下一步")),1),t("div",ce,[v(r(e.$t("已经拥有账户"))+"？ ",1),w(y,{to:"/login"},{default:q(()=>[v(r(e.$t("去登录")),1)]),_:1})])])])}}},me=J(ue,[["__scopeId","data-v-eb63e7da"]]);export{me as default};
